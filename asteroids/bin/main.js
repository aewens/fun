// Generated by CoffeeScript 1.7.1
(function() {
  var Canvas, Game, GameState, State, States, game, _ref;

  this.App = (_ref = window.App) != null ? _ref : {};

  State = this.App.State;

  GameState = this.App.GameState;

  Canvas = this.App.Canvas;

  States = {
    NO_CHANGE: 0,
    MENU: 1,
    GAME: 2,
    END: 3
  };

  Game = (function() {
    function Game() {
      this.canvas = new Canvas(640, 480);
      this.canvas.ctx.strokeStyle = "#fff";
      this.currentState = null;
      this.nextState = States.GAME;
    }

    Game.prototype.run = function() {
      var self;
      self = this;
      return this.canvas.animate(function() {
        if (self.nextState !== States.NO_CHANGE) {
          switch (self.nextState) {
            case States.MENU:
              self.currentState = new State(self);
              break;
            case States.GAME:
              self.currentState = new GameState(self);
              break;
            case States.END:
              self.currentState = new State(self);
          }
          self.nextState = States.NO_CHANGE;
        }
        self.currentState.handleInputs();
        self.currentState.update();
        return self.currentState.render(self.canvas.ctx);
      });
    };

    return Game;

  })();

  game = new Game;

  game.run();

}).call(this);
